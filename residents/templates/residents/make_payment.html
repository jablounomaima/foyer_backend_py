<!-- residents/templates/residents/make_payment.html -->
{% extends "residents/base.html" %}
{% block page_title %}Effectuer le paiement{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="mb-0">Paiement de la réservation</h5>
            </div>
            <div class="card-body">
                <p><strong>Type de chambre :</strong> {{ reservation.get_room_type_display }}</p>
                <p><strong>Montant total :</strong> {{ reservation.get_price|add:reservation.get_deposit }} DT</p>
                <p><strong>Détail :</strong> Loyer ({{ reservation.get_price }} DT) + Caution ({{ reservation.get_deposit }} DT)</p>
                <p><strong>Délai de paiement :</strong> {{ reservation.payment_deadline|date:"d M Y H:i" }}</p>

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="method">Méthode de paiement</label>
                        <select name="method" id="method" class="form-control" required>
                            <option value="">-- Choisir --</option>
                            <option value="edinar">Carte e-dinar</option>
                            <option value="rib">Virement RIB</option>
                            <option value="mobile_money">Mobile Money</option>
                            <option value="other">Autre</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.proof.id_for_label }}">Preuve de paiement (capture)</label>
                        {{ form.proof }}
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.notes.id_for_label }}">Informations complémentaires</label>
                        {{ form.notes }}
                    </div>
                    <button type="submit" class="btn btn-success">Envoyer le paiement</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}